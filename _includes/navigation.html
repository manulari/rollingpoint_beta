<nav>
  <ul>
  {% if language == "en" %}{% assign entries = site.data.nav_en.entries %}{% else %}{% assign entries = site.data.nav_de.entries %}{% endif %}
    {% for item in entries %}
      {% assign firstchar = item.path | slice: 0 %}
      {% if firstchar == '/' %}
      {% assign itempath = item.path %}
      {% else %}
      {% assign itempath = '/' | append: item.path %}
      {% endif %}
      <li><a href="{{ itempath }}" class="{% if page.url == itempath %}menu_active{% endif %}">{{ item.title }}</a>
      {% if item.subentries %}
      <ul>
        {% for subitem in item.subentries %}
          {% assign firstchar = subitem.path | slice: 0 %}
          {% if firstchar == '/' %}
          {% assign subitempath = subitem.path %}
          {% else %}
          {% assign subitempath = '/' | append: subitem.path %}
          {% endif %}
          <li><a href="{{ subitempath }}" class="{% if page.url == subitempath %}menu_active{% endif %}">{{ subitem.title }}</a></li>
        {% endfor %}
      </ul>
      {% endif %}
      </li>
    {% endfor %}
  </ul>
</nav>
